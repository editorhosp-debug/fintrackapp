<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Controle Financeiro - Jonnie</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Controle Financeiro <small class="muted">— Jonnie</small></h1>
      <div class="controls">
        <button id="themeToggle" class="btn ghost">Alternar tema</button>
        <button id="exportBtn" class="btn">Exportar CSV</button>
        <button id="clearBtn" class="btn">Limpar dados</button>
      </div>
    </header>

    <div class="grid cols-3">
      <div class="card">
        <div class="balance">
          <div class="small">Saldo atual</div>
          <div id="balance" class="value">R$ 0,00</div>
          <div class="small" id="summary">Entradas: R$ 0,00 • Saídas: R$ 0,00</div>
        </div>

        <hr style="margin:12px 0;border:none;border-top:1px solid rgba(0,0,0,0.04)">

        <form id="txForm">
          <div class="row">
            <select id="type" required>
              <option value="entrada">Entrada</option>
              <option value="saida">Saída</option>
            </select>
            <input id="amount" type="number" step="0.01" placeholder="Valor (ex: 120.50)" required />
          </div>
          <input id="desc" placeholder="Descrição" />
          <div class="row">
            <input id="date" type="date" />
            <select id="recurrence">
              <option value="none">Sem recorrência</option>
              <option value="monthly">Mensal</option>
              <option value="weekly">Semanal</option>
            </select>
          </div>
          <div style="display:flex;gap:8px;margin-top:6px">
            <button type="submit" class="btn primary">Adicionar</button>
            <button type="button" id="addSample" class="btn">Exemplo</button>
          </div>
        </form>

        <div class="transactions" id="txList" aria-live="polite"></div>
      </div>

      <div>
        <div class="card" style="margin-bottom:12px">
          <canvas id="summaryChart" height="240"></canvas>
        </div>
        <div class="card">
          <div class="small">Filtros</div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <select id="filterType">
              <option value="all">Todos</option>
              <option value="entrada">Entradas</option>
              <option value="saida">Saídas</option>
            </select>
            <input id="filterText" placeholder="Pesquisar..." />
          </div>
          <div style="margin-top:10px;display:flex;gap:8px">
            <button id="applyFilter" class="btn">Aplicar</button>
            <button id="resetFilter" class="btn ghost">Limpar</button>
          </div>
        </div>
      </div>
    </div>

    <footer class="muted">Dados salvos localmente no seu navegador (localStorage).</footer>
  </div>

  <script src="app.js"></script>
  <link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log("Service Worker registrado com sucesso"))
      .catch(err => console.error("Erro ao registrar Service Worker:", err));
  }
</script>

</body>
</html>
